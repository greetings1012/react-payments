import{j as a}from"./jsx-runtime-DRTy3Uxn.js";import{r as l}from"./index-BBkUAzwr.js";import{D as f}from"./constants-CO7ZIsjx.js";import{I as y}from"./Input-DtQZF3FR.js";import{s as c}from"./CardInputPage.module-3tVdBXva.js";function E({date:o,setDate:s,isCompletedSections:u,setIsCompletedSections:p,isOpenForm:d,setIsOpenForm:h}){const[e,N]=l.useState({monthError:null,yearError:null}),g=({month:t=o.month,year:r=o.year})=>{const n={monthError:null,yearError:null},m=x(t,r);r.length>0&&r.length<2&&(n.yearError="유효하지 않은 날짜입니다."),m==="INVALID_MONTH"&&(n.monthError="이미 만료된 카드입니다."),m==="INVALID_YEAR"&&(n.yearError="이미 만료된 카드입니다."),isNaN(Number(t))&&(n.monthError="숫자만 입력해주세요."),(Number(t)<=0||Number(t)>12)&&(n.monthError="유효하지 않은 날짜입니다."),isNaN(Number(r))&&(n.yearError="숫자만 입력해주세요."),N({monthError:n.monthError||null,yearError:n.yearError||null})};l.useEffect(()=>{const t=[...u],r=o.month.length==2&&o.year.length==2&&!e.monthError&&!e.yearError;t[2]=r,p(t);const n=[...d];r===!0&&(n[3]=!0),h(n)},[o]);const x=(t,r)=>{if(r.length<2||t.length<2)return!1;const n=new Date,m=n.getMonth()+1,S=n.getFullYear()-2e3;return Number(r)===S&&Number(t)<m?"INVALID_MONTH":Number(r)<S?"INVALID_YEAR":!1},A=t=>{const r=Number(t.target.value);r<=1||t.target.value.length>=2?s({...o,month:t.target.value}):r>=2&&r<=9&&s({...o,month:t.target.value.padStart(2,"0")}),g({month:t.target.value}),(t.target.value.length===2&&t.target.nextSibling||Number(t.target.value)>2)&&t.target.nextSibling.focus()},C=t=>{s({...o,year:t.target.value}),g({year:t.target.value})};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:c.label,children:"유효기간"}),a.jsxs("div",{className:c.horizon__gap__container,children:[a.jsx(y,{onChange:A,placeholder:f.MONTH,maxLength:2,value:o.month,autoFocus:!0,isError:(e==null?void 0:e.monthError)!==null}),a.jsx(y,{onChange:C,placeholder:f.YEAR,maxLength:2,value:o.year,isError:(e==null?void 0:e.yearError)!==null})]}),a.jsx("div",{className:c.error_message,children:e!==null&&((e==null?void 0:e.monthError)||(e==null?void 0:e.yearError))&&a.jsx("div",{className:c.error_message,children:(e==null?void 0:e.monthError)||(e==null?void 0:e.yearError)})})]})}E.__docgenInfo={description:"",methods:[],displayName:"CardExpirationDateInputField",props:{date:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},setDate:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"}],raw:"SetStateAction<Record<string, string>>"}],raw:"Dispatch<SetStateAction<Record<string, string>>>"},description:""},isCompletedSections:{required:!0,tsType:{name:"Array",elements:[{name:"boolean"}],raw:"boolean[]"},description:""},setIsCompletedSections:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"boolean"}],raw:"boolean[]"}],raw:"SetStateAction<boolean[]>"}],raw:"Dispatch<SetStateAction<boolean[]>>"},description:""},isOpenForm:{required:!0,tsType:{name:"Array",elements:[{name:"boolean"}],raw:"boolean[]"},description:""},setIsOpenForm:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"boolean"}],raw:"boolean[]"}],raw:"SetStateAction<boolean[]>"}],raw:"Dispatch<SetStateAction<boolean[]>>"},description:""}}};const T={title:"Field/CardExpirationDateInputField",component:E},F=o=>{const[s,u]=l.useState({month:"",year:""}),[p,d]=l.useState([!1]),[h,e]=l.useState([!1]);return a.jsx(E,{...o,date:s,setDate:u,isCompletedSections:p,setIsCompletedSections:d,isOpenForm:h,setIsOpenForm:e})},i=F.bind({});i.args={};var I,D,b;i.parameters={...i.parameters,docs:{...(I=i.parameters)==null?void 0:I.docs,source:{originalSource:`args => {
  const [date, setDate] = useState<Record<string, string>>({
    month: "",
    year: ""
  });
  const [isCompletedSections, setIsCompletedSections] = useState([false]);
  const [isOpenForm, setIsOpenForm] = useState([false]);
  return <CardExpirationDateInputField {...args} date={date} setDate={setDate} isCompletedSections={isCompletedSections} setIsCompletedSections={setIsCompletedSections} isOpenForm={isOpenForm} setIsOpenForm={setIsOpenForm} />;
}`,...(b=(D=i.parameters)==null?void 0:D.docs)==null?void 0:b.source}}};const j=["Default"];export{i as Default,j as __namedExportsOrder,T as default};
