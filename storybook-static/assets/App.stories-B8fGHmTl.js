import{j as e}from"./jsx-runtime-DRTy3Uxn.js";import{r as g}from"./index-BBkUAzwr.js";import{I as E}from"./Input-DBw9Wm5s.js";import{C as w}from"./Card-Phd04GMd.js";const R="_background_dllzn_5",O="_layout_dllzn_14",T="_shelf__section_dllzn_23",L="_horizon__gap__container_dllzn_27",z="_error_message_dllzn_33",F="_label_dllzn_42",l={background:R,layout:O,shelf__section:T,horizon__gap__container:L,error_message:z,label:F},H="_card__info__form_c58as_1",Y={card__info__form:H};function b({children:n}){return e.jsx("form",{className:Y.card__info__form,children:n})}b.__docgenInfo={description:"",methods:[],displayName:"Form"};const k="_container_c04hp_1",q="_none_description_c04hp_8",V="_title_c04hp_12",U="_description_c04hp_19",N={container:k,none_description:q,title:V,description:U};function x({title:n,description:c}){return e.jsxs("div",{className:`${N.container} ${!c&&N.none_description}`,children:[e.jsx("h1",{className:N.title,children:n}),e.jsx("h3",{className:N.description,children:c})]})}x.__docgenInfo={description:"",methods:[],displayName:"ShelfHeader",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""}}};const M=4,B="1234",A={MONTH:"MM",YEAR:"YY"};function I({cardNumbers:n,setCardNumbers:c}){const[a,d]=g.useState([]),[m,_]=g.useState([]),u=(r,o)=>{const i=a.findIndex(([f,P])=>f===r);if(i===-1)d([...a,[r,o]]);else{const f=[...a];f[i]=[r,o],d(f)}},h=r=>{const o=[...a];d(o.filter(([i])=>i!==r))},t=(r,o)=>{if(isNaN(Number(r.target.value))&&r.target.value.length!==0){_([o,"숫자를 입력해주세요."]);return}r.target.value.length<4&&u(o,"4개의 숫자를 입력해주세요."),_([]);const i=[...n];i[o]=r.target.value,c(i),r.target.value.length===4&&h(o)},s=r=>a.filter(([o])=>o===r).length===1;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:l.label,children:"카드 번호"}),e.jsx("div",{className:l.horizon__gap__container,children:n.map((r,o)=>e.jsx(E,{onChange:i=>t(i,o),placeholder:B,maxLength:M,value:r,type:o>=n.length/2?"password":"type",isError:s(o)}))}),(m.length!==0||a.length!==0)&&e.jsx("div",{className:l.error_message,children:m.length!==0?m[1]:a[a.length-1][1]})]})}I.__docgenInfo={description:"",methods:[],displayName:"CardNumbersInputField",props:{cardNumbers:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setCardNumbers:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Array",elements:[{name:"string"}],raw:"string[]"}],raw:"SetStateAction<string[]>"}],raw:"Dispatch<SetStateAction<string[]>>"},description:""}}};function C({date:n,setDate:c}){const[a,d]=g.useState([]),m=({month:t=n.month,year:s=n.year})=>{const r=new Array(Object.keys(n).length).fill(0).map(()=>[]),o=_(t,s);s.length>0&&s.length<2&&(r[1]=[1,"유효하지 않은 날짜입니다."]),o==="INVALID_MONTH"&&(r[0]=[0,"이미 만료된 카드입니다."]),o==="INVALID_YEAR"&&(r[1]=[1,"이미 만료된 카드입니다."]),isNaN(Number(t))&&(r[0]=[0,"숫자만 입력해주세요."]),(Number(t)<=0||Number(t)>12)&&(r[0]=[0,"유효하지 않은 날짜입니다."]),isNaN(Number(s))&&(r[1]=[1,"숫자만 입력해주세요."]),d(r.filter(i=>i.length!==0))},_=(t,s)=>{if(s.length<2||t.length<2)return!1;const r=new Date,o=r.getMonth()+1,i=r.getFullYear()-2e3;return Number(s)===i&&Number(t)<o?"INVALID_MONTH":Number(s)<i?"INVALID_YEAR":!1},u=t=>{const s=Number(t.target.value);s<=1||t.target.value.length>=2?c({...n,month:t.target.value}):s>=2&&s<=9&&c({...n,month:t.target.value.padStart(2,"0")}),m({month:t.target.value})},h=t=>{c({...n,year:t.target.value}),m({year:t.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:l.label,children:"유효기간"}),e.jsxs("div",{className:l.horizon__gap__container,children:[e.jsx(E,{onChange:u,placeholder:A.MONTH,maxLength:2,value:n.month,isError:a.filter(([t])=>t===0).length!==0}),e.jsx(E,{onChange:h,placeholder:A.YEAR,maxLength:2,value:n.year,isError:a.filter(([t])=>t===1).length!==0})]}),a.length!==0&&e.jsx("div",{className:l.error_message,children:a[a.length-1][1]})]})}C.__docgenInfo={description:"",methods:[],displayName:"CardExpirationDateInputField",props:{date:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},setDate:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"}],raw:"SetStateAction<Record<string, string>>"}],raw:"Dispatch<SetStateAction<Record<string, string>>>"},description:""}}};const $="JOHN DOE";function D({ownerName:n,setOwnerName:c}){const[a,d]=g.useState(""),m=t=>t.replace(/\s+/g," ").trimStart(),_=t=>t.split("").filter(s=>s===" "||s.charCodeAt(0)>=65&&s.charCodeAt(0)<=90).join(""),u=t=>{const s=_(t.target.value.toUpperCase()),r=m(s);if(s.length>r.length&&r.length!==0){d("공백을 연속으로 입력할 수 없습니다.");return}if(s.length<t.target.value.length){d("영어만 입력 가능합니다."),c(s);return}d(""),c(r)},h=t=>{if(console.log("blur"),t.target.value.length===0){d("이름을 입력해주세요.");return}d("")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:l.label,children:"소유자 이름"}),e.jsx("div",{className:l.horizon__gap__container,children:e.jsx(E,{onChange:u,isError:a.length!==0,placeholder:$,maxLength:26,value:n,onBlur:h})}),a!==""&&e.jsx("div",{className:l.error_message,children:a})]})}D.__docgenInfo={description:"",methods:[],displayName:"CardOwnerNameInputField",props:{ownerName:{required:!0,tsType:{name:"string"},description:""},setOwnerName:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"string"}],raw:"SetStateAction<string>"}],raw:"Dispatch<SetStateAction<string>>"},description:""}}};function j(){const[n,c]=g.useState(new Array(M).fill("")),[a,d]=g.useState({month:"",year:""}),[m,_]=g.useState("");return e.jsx("main",{className:l.background,children:e.jsxs("section",{className:l.layout,children:[e.jsx(w,{cardNumbers:n,date:a,ownerName:m}),e.jsxs(b,{children:[e.jsxs("div",{className:l.shelf__section,children:[e.jsx(x,{title:"결제할 카드 번호를 입력해 주세요",description:"본인 명의의 카드만 결제 가능합니다."}),e.jsx(I,{cardNumbers:n,setCardNumbers:c})]}),e.jsxs("div",{className:l.shelf__section,children:[e.jsx(x,{title:"카드 유효기간을 입력해 주세요",description:"월/년도(MMYY)를 순서대로 입력해 주세요."}),e.jsx(C,{date:a,setDate:d})]}),e.jsxs("div",{className:l.shelf__section,children:[e.jsx(x,{title:"카드 소유자 이름을 입력해주세요"}),e.jsx(D,{ownerName:m,setOwnerName:_})]})]})]})})}j.__docgenInfo={description:"",methods:[],displayName:"App"};const Q={title:"App",component:j},p=()=>e.jsx(j,{});p.args={};p.__docgenInfo={description:"",methods:[],displayName:"DefaultApp"};var v,y,S;p.parameters={...p.parameters,docs:{...(v=p.parameters)==null?void 0:v.docs,source:{originalSource:"() => <App />",...(S=(y=p.parameters)==null?void 0:y.docs)==null?void 0:S.source}}};const X=["DefaultApp"];export{p as DefaultApp,X as __namedExportsOrder,Q as default};
